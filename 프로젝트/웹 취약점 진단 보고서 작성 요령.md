# 웹 취약점 진단 보고서 작성 요령

## 주요기반 시설 가이드 취약점
* 웹 28개 항목
    - 28개 취약점 리스트에 기반하여 웹 취약점 진단 보고서 작성
    - __28개 취약점 중 15건의 취약점이 발견되었다.__

* 웹 취약점 진단 보고서
    - != 모의해킹 보고서
    - 우리나라에서는 같게 보는 경우가 많음

```
sql 인젝션 : 파라미터 100개 발견 - 1건
xss : 파라미터 2개 -> 1건
불충분한 인증 : 3개 -> 1건
    - 누구인지 모름
불충분한 인가 : 1개 -> 1건
    - 누구인지는 알지만 권한을 잘못 설정
불충분한 인가 : 1개 -> 1건
프로세스 검증 누락 : 10개 -> 1건
```

### 1. 버퍼 오버플로우
* 일주일 안에 알기 힘듦
* 보통 '양호'로 취급

### 2. 포맷스트링
* 보통 C언어의 printf의 취약점
* 보통 '양호'로 취급
    - C언어에서 사용을 잘 안함

### 3. LDAP 인젝션
* 가벼운 DB
* 일반적으로 '양호' 취급
    - 웹 인증에 거의 사용 안함(보통 DB를 사용함)
    - 사내망에서는 가끔 사용

### 4. 운영체제 명령 실행
* OS Command Injection
* 거의 '양호'
    - 위약점 가능성 있음

### 5. SQL 인젝션
* 취약점 진단 필요
* Dynamic SQL 구문 사용 금지
    - 입력값을 단순한 text로 처리

### 6. SSI 인젝션
* XSS를 서버에 사용
* 일반적으로 '양호'
* `<!--#echo var="DOCUMENT_ROOT"-->`  
* `<!-- #echo cmd="ls -al" -->`

### 7. XPath 인젝션
* 가능성은 있지만 거의 '양호'
* SQL문과 비슷함
    - 1' and '1'='1'
    - %' and '1%'='1
    - 1 and 1=1

### 8. 디렉처리 인텍싱
* url에서 직접 디렉터리 경로에 접근했을때 디렉터리 파일 리스트가 노출됨
* `%3f.jsp`
* `index.jsp%23aaa`
    - 정보 노출(jeus)
* 스케닝 툴 사용도 가능

### 9. 정보 누출
* 대부분 정보, Case by Case

### 10. 악성 콘텐츠
* 파일 업로드 기능이 있고, 악성 파일이 올리면 됬을때(html, exe 등)
    - 웹쉘이 업로드가 되면, '파일 업로드파일 취약점'
    - 크로스 사이드 스크립트와 비슷함

 ### 11. 크로스사이트 스크립팅(XSS)
 * github에서 스트립트 찾아보기

 ### 12. 약한 문자열 강도
* 특수 문자 사용하여, 9글자 이상 문자로 만들기
* 회원 가입할 때 확인
* 간단하게 로그인이 될 때

 ### 13. 불충분한 인증
 * 추가 인증 절차가 있는가
 * 관리자 로그인 화면에 그냥 접근할 수 있을때

### 14.취약한 패스워드 인증
* 불충분한 인증
* 패스워드를 쉽게 추측 가능
* 이메일 인증을 하면 취약하지 않음

### 15. 크로스사이트 리퀘스트 변조(CSRF)
* XSS 취약점이 존재하는지 확인

### 16. 세션 예측
* 셰션 ID : 쿠키로 클라이언트에 저장
    - 너무 쉬워 예측 가능하면 취약
* 웬만해선 '양호'
* 세션 ID는 로그인 시마다 추측할 수 없는 새로운 ID로 발급해야함

### 17. 불충분한 인가
* 파라미터 변경으로 타인 정보 열람 및 수정

### 18. 불충분한 세션 만료
* 세션 타임 아웃 설정 확인
* 로그인 화면과 시간 스샷
    - 금융권 : 10분
    - 일반적으로 : 1시간

### 19. 세션 고정
* 세션 ID는 로그인 시마다 추측할 수 없는 새로운 ID로 발급해야함

### 20. 자동화 공격
* 연속되는 시도가 성공이 되면 취약

### 21. 프로세스 검증 누락
* 인증할 시 프로세스가 여러 단계일 때, 인증의 단계를 건너뛸 수 있을때
* '불충분한 인증'과 비숫함
* ex) 로그인 하지 않고 관리자 페이지 접속

### 22. 파일 업로드
* 웹쉘 업로드

### 23. 파일 다운로드

### 24. 관리자 페이지 노출
* 관리자 페이지 접근가능할 때 취약

### 25. 경로 추적
* 다운로드가 안되도 접근 가능하면 취약

### 26. 위치 공개
* 불필요한 피일이 존재할 시 취약

### 27. 데이터 평문 전송
* https 사용 안함
* wireshark를 사용

### 28. 쿠키 변조
* 쉽게 변조가 가능한 쿠키가 있을때 취약
    - 쿠키값을 바뀔 경우. 보안이 위배되는 상황시 취약

---
## 사이트 정보
* 코어몰(Core Mall)
    - http://70.12.113.49:81/
    - 사이트가 버그나는 경우 있는데 요청해서 복원시켜야 함
* 아바타몰(Avatar Mall)
    - http://70.12.113.49:82/

* 아바타몰
    - 엣날 사이트라 최신브라우저에서 플래시 버튼이 잘 클릭 안 됨
    - 파일업로드 기능 및 게시판 글쓰기 기능에 일부 버그 있음
    - 파일업로드 안됨

---
* 보안 대책은 1페이지 정도 넣기