# Malware Analysis

### 컴파일시 나오는 .obj 파일이란?
* 코드 -> 전처리 -> 컴파일러 -> 어셈플러 -> 링커 -> 실행파일
	- 컴파일과정
* obj
	- PE
	- ELF(Executable and Linkable Format)
	- COFF
* __헤더와 섹션에 대한 정보가 담김__

### stub 코드
* 컴파일러가 보호기법(Mitigation)을 적용하기 위해, '전처리' 과정에 앞에 붙이는 코드
	- 컴파일러 마다 stub 코드가 다름
* zip파일 같은 패킹(packing)하는데 사용
	- 안티리버싱
* 컴파일러의 컴파일 방식이 들어감
#### 참고
* https://blue-shadow.tistory.com/20

#### Immunity Debugger
* 파이썬 개발
* 64bit 지원

#### 레지스터, 레지스트리
* 레지스터 : CPU 임시저장공간
* 레지스트리 : 저장소

### Jst-in-time debugging - OllyDbg
* error가 났을떼 처리 하는 옵션
* 컴퓨터에서 에러가 나연 OllyDbg에서 처리
	- Make OllyDbg Jst-in-time debugging 활성
	
### Debugging otions - OllyDbg
* Events - Entry point of main module 선택

#### ASLR : Address Space Layout Randomization
* 메모리 보호기법

---
#### CPU가 다르면 레지스터 정보도 바뀜

#### 안드로이드는 힙메모리 영역만 사용
* 스택 영역은 시스템만?

#### 메모리에서 메모리는 복사가 안됨 - 프로그램이 그렇게 됨
* 복사가 되면 메모리 복사

---
```
CF => Carry Flag
OF => Overflow Flag
SF => Sign Flag
ZF => Zero Flag
AF => Auximiliary carry Flag
PF => Parity Flag
DF => Direction Flag
IF => Interrupt Flag
TF => Trap Flag

CF => 부호없는 수 끼리 연산 후 연산결과가 길면 1
OF => 부호있는 수 끼리 연산 후 연산결과가 길면 1
SF => 연산결과가 음수면 1
ZF => 연산결과가 0이면 1
AF => 10진수 연산시 보정(자리올림, 빌림 등)이 필요하면 1
PF => 연산결과에서 1이 짝수개이면 1
DF => 문자열 처리할때 사용하는데 0이면 전진하면서 처리, 1이면 빽하면서 처리함
IF => 인터럽트 처리할때 사용하는데 0이면 외부에서들어오는 인터럽트 무시, 1이면 허용함
TP => 프로세서 처리할때 사용하는데 0이면 디폴트고 1이면 명령 실행후 특정 프로시저 호출

출처: https://mu1ti.tistory.com/16 [Multi]
```

### jump에서 'short'의 의미
* 참고 : https://stackoverflow.com/questions/5757866/what-does-short-jump-mean-in-assembly-language